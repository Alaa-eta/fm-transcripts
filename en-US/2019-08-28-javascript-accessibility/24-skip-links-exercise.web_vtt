WEBVTT

1
00:00:00.380 --> 00:00:03.520
&gt;&gt; Marcy Sutton: So that should be it for
this custom route heading.

2
00:00:03.520 --> 00:00:06.090
And now I'm gonna go implement it.

3
00:00:06.090 --> 00:00:09.260
So I've still got an import here.

4
00:00:10.610 --> 00:00:15.450
It's looking for it in the better
directory, so we're in the right spot.

5
00:00:15.450 --> 00:00:18.150
It's grayed out because I haven't
actually referenced it yet.

6
00:00:18.150 --> 00:00:20.720
But I'm just gonna grab
that component name.

7
00:00:22.160 --> 00:00:25.730
And I'm going to change this h2 to
a route target heading component.

8
00:00:25.730 --> 00:00:28.050
I'm going to pass in a level of two.

9
00:00:29.140 --> 00:00:30.940
So it'll give me that h2.

10
00:00:30.940 --> 00:00:35.250
And a quick note about headings is that
we want to start with h1 on a page and

11
00:00:35.250 --> 00:00:36.590
go in order.

12
00:00:36.590 --> 00:00:42.289
So the h1 on our app is this top-level
Accessibility in JavaScript Applications.

13
00:00:43.470 --> 00:00:46.620
Sometimes you wanna change the h1
to be the name of the page.

14
00:00:46.620 --> 00:00:50.806
You can play with the heading levels a
little bit just I think the most important

15
00:00:50.806 --> 00:00:54.051
thing is that they go in order so
that you don't skip levels.

16
00:00:54.051 --> 00:01:00.000
So I'm not skipping straight to h2,
I already have an h1 elsewhere.

17
00:01:00.000 --> 00:01:01.360
So I've got that.

18
00:01:01.360 --> 00:01:05.590
The other prop I need to
pass in is target id.

19
00:01:05.590 --> 00:01:08.910
And I'm just gonna say navigation and
if we go.

20
00:01:08.910 --> 00:01:10.860
I think I need the,

21
00:01:12.680 --> 00:01:16.670
back here in my site Chrome directory
I have a navigation snippet.

22
00:01:16.670 --> 00:01:20.478
So what's nice about working with
React components is you can break up

23
00:01:20.478 --> 00:01:24.041
different parts of your site
Chrome into different components.

24
00:01:24.041 --> 00:01:28.309
They're reusable but also you can just
focus on that one part of your site or

25
00:01:28.309 --> 00:01:30.360
that one part of your application.

26
00:01:30.360 --> 00:01:32.890
And this is where my navigation lives.

27
00:01:32.890 --> 00:01:35.220
And there is an id of navigation here.

28
00:01:35.220 --> 00:01:38.960
I've also got a visually hidden
heading here in the nav section.

29
00:01:38.960 --> 00:01:44.710
So in that left sidebar there is
a heading here that says Navigation.

30
00:01:44.710 --> 00:01:49.189
But the part that I really want
to focus on are these Demos.

31
00:01:49.189 --> 00:01:52.834
If I am coming from the Dropdown
link here in the left and

32
00:01:52.834 --> 00:01:57.920
I want to send focus into it's matching
content and then I want to skip back.

33
00:01:57.920 --> 00:02:02.270
I think the most appropriate place is to
focus on these links where I came from.

34
00:02:02.270 --> 00:02:05.730
So that's why I am putting
the id right here, so

35
00:02:05.730 --> 00:02:09.960
navigation that will match this use case.

36
00:02:09.960 --> 00:02:14.430
So I'm actually going to copy this
because we need this on all of our pages.

37
00:02:14.430 --> 00:02:16.710
I've just used h2s here.

38
00:02:16.710 --> 00:02:19.720
I'm going to go change these real quick so

39
00:02:19.720 --> 00:02:25.010
that when I'm clicking around, they match
and it won't matter what page I'm on.

40
00:02:25.010 --> 00:02:27.210
So I'm going to change all these.

41
00:02:27.210 --> 00:02:30.222
And hopefully we can just automate
this stuff so it's easier and

42
00:02:30.222 --> 00:02:33.367
you don't really have to think about
it but for now this will work.

43
00:02:33.367 --> 00:02:35.484
I mean this is how
frameworks get made [LAUGH].

44
00:02:35.484 --> 00:02:40.079
We prototype it, we see if it works, we
get more user testing which is something

45
00:02:40.079 --> 00:02:43.930
I'm doing and then we see how can
we make that easier for everyone.

46
00:02:45.404 --> 00:02:49.570
So RouteTargetHeading, and you can
honestly call this whatever you want.

47
00:02:49.570 --> 00:02:52.230
Naming things is one of the hardest
things in computer science.

48
00:02:52.230 --> 00:02:54.920
So, maybe the name will change.

49
00:02:54.920 --> 00:02:56.740
Maybe it makes sense to me and
no one else.

50
00:02:58.010 --> 00:03:00.850
I think I've got two more here.

51
00:03:00.850 --> 00:03:06.370
I kept the imports in there so,
it should be fine.

52
00:03:06.370 --> 00:03:08.860
The semantics page is an example for
you all to use later.

53
00:03:10.010 --> 00:03:11.710
RouteTargetHeading is not fine.

54
00:03:11.710 --> 00:03:14.090
Okay, so
I do need to import that somewhere.

55
00:03:15.780 --> 00:03:18.880
Let's see, which one was complaining,
the index page.

56
00:03:21.680 --> 00:03:26.040
So I'm just going to paste this import,
so it knows where to find that component.

57
00:03:27.110 --> 00:03:33.440
So now, if I hover here, I've got this
little anchor thing that shows up.

58
00:03:33.440 --> 00:03:36.474
It looks kinda funky because there's
a caret and an underline, so

59
00:03:36.474 --> 00:03:38.654
I'm actually gonna go
turn off the underline.

60
00:03:40.766 --> 00:03:42.990
&gt;&gt; Marcy Sutton: For
this case it's an interactive thing.

61
00:03:42.990 --> 00:03:47.020
I really recommend keeping underlines
on for regular text links.

62
00:03:47.020 --> 00:03:48.990
This is sort of a special case.

63
00:03:48.990 --> 00:03:53.840
So I'm going to say,
text-decoration:none for

64
00:03:53.840 --> 00:03:57.347
this one little interactive thing.

65
00:03:57.347 --> 00:04:00.581
And probably I would use it
like a more graceful arrow, but

66
00:04:00.581 --> 00:04:03.650
that's what I had [LAUGH]
off the top of my head.

67
00:04:03.650 --> 00:04:10.120
Okay, so I think the other part that I
need to hook up is back in gatsby-browser.

68
00:04:10.120 --> 00:04:11.910
So I guess let's go.

69
00:04:11.910 --> 00:04:12.814
What I'm going to do here.

70
00:04:12.814 --> 00:04:17.782
So at this level this API
method doesn't really.

71
00:04:17.782 --> 00:04:20.849
I don't really have insight into
what's inside my application and

72
00:04:20.849 --> 00:04:23.090
frankly I don't really want to know.

73
00:04:23.090 --> 00:04:25.130
I just want to go look on the page and
see,

74
00:04:25.130 --> 00:04:28.460
is there a skip link kind of like
the one that I'm looking for.

75
00:04:28.460 --> 00:04:31.610
I'm just gonna write it like that if,
let's go see.

76
00:04:31.610 --> 00:04:36.960
I'm gonna do, set a variable and
call it skipLink.

77
00:04:36.960 --> 00:04:40.700
And I'm just going to go look for
it, document.queryselector.

78
00:04:42.460 --> 00:04:48.042
And it was called routeSkipLink was
the CSS class that I added in here,

79
00:04:48.042 --> 00:04:49.468
routeSkipLink.

80
00:04:49.468 --> 00:04:52.060
So if there's a skip link on the page,

81
00:04:52.060 --> 00:04:55.221
I don't want to error
out if there isn't one.

82
00:04:55.221 --> 00:04:56.797
And if there isn't one,

83
00:04:56.797 --> 00:05:01.845
it'll fall back to Reach Router doing
some routing focus handling for us.

84
00:05:01.845 --> 00:05:06.650
But if there is a skip link,
I'm gonna say skipLink.focus.

85
00:05:06.650 --> 00:05:09.280
And so this will go look for
that component,

86
00:05:09.280 --> 00:05:14.716
in the event that there is a previous
location because we've navigated.

87
00:05:14.716 --> 00:05:20.320
That'll be null on the first load of
a page because you're just getting there,

88
00:05:20.320 --> 00:05:22.670
there isn't a previous location.

89
00:05:22.670 --> 00:05:25.871
So now if I use.

90
00:05:25.871 --> 00:05:27.590
Let's go see, I have an error.

91
00:05:29.000 --> 00:05:33.490
And by the way, if you see this Unchecked
runtime.lasterror message in the devtools,

92
00:05:33.490 --> 00:05:35.010
I see that all over the web.

93
00:05:35.010 --> 00:05:37.010
It might be from a browser extension or
something.

94
00:05:37.010 --> 00:05:39.350
It doesn't actually have anything
to do with this application.

95
00:05:39.350 --> 00:05:41.130
So don't worry about that.

96
00:05:42.550 --> 00:05:45.660
So, I don't think I got my
conditional right here.

97
00:05:45.660 --> 00:05:48.712
So I'm actually gonna do
a little bit of logging and say,

98
00:05:48.712 --> 00:05:53.330
console.log(location, prevlocation).

99
00:05:53.330 --> 00:05:56.910
And we'll just go make sure
that this method is working.

100
00:05:56.910 --> 00:06:01.012
So yeah, we've got a location and

101
00:06:01.012 --> 00:06:06.479
null here for
when there is a different one.

102
00:06:06.479 --> 00:06:08.380
I was on the drop-down page already.

103
00:06:08.380 --> 00:06:13.369
I think maybe some styling to indicate
to me that that's the page I'm on would

104
00:06:13.369 --> 00:06:14.305
have helped.

105
00:06:14.305 --> 00:06:20.150
So it's actually working because this
is showing our little route skip link.

106
00:06:20.150 --> 00:06:21.460
So I'm gonna do that with the keyboard.

107
00:06:21.460 --> 00:06:23.360
I'm gonna close the devtools.

108
00:06:23.360 --> 00:06:26.350
And that was our focus
outline on the navigation.

109
00:06:26.350 --> 00:06:27.580
So it's actually working.

110
00:06:29.130 --> 00:06:30.460
So I can go back and forth.

111
00:06:31.610 --> 00:06:34.810
It's working better than kicking
me all the way back to the top of

112
00:06:34.810 --> 00:06:36.410
the application.

113
00:06:36.410 --> 00:06:39.820
So I'm pretty happy with that.

114
00:06:39.820 --> 00:06:44.410
I can go on to one of these links
with the keyboard, hit the Enter key,

115
00:06:44.410 --> 00:06:48.740
it sends my focus to a skip link that it
doesn't take up much space on the screen.

116
00:06:48.740 --> 00:06:51.660
I could opt to style that however I want.

117
00:06:51.660 --> 00:06:55.470
I can make it look like an icon button and
give it an accessible name.

118
00:06:55.470 --> 00:06:59.850
I could make it look like an actual
skip link and say skip to navigation.

119
00:06:59.850 --> 00:07:04.550
So there's some subjectivity
involved with the design but

120
00:07:04.550 --> 00:07:07.371
it functionally serves purposes.

121
00:07:07.371 --> 00:07:11.218
We're not just sending focus to this
wrapper element and then being like,

122
00:07:11.218 --> 00:07:13.710
all right, you're on your own.

123
00:07:13.710 --> 00:07:16.250
Go tab around and
figure out where you are.

124
00:07:16.250 --> 00:07:18.540
This link is actually useful.

125
00:07:18.540 --> 00:07:20.180
Like it serves a purpose.

126
00:07:20.180 --> 00:07:24.135
And so through research, I found that
that just made a lot more sense.

127
00:07:24.135 --> 00:07:27.690
As for where we skip back to,
we could play with that a little bit.

128
00:07:27.690 --> 00:07:31.883
Like, I'm sending focus back to
the wrapper element of the nav,

129
00:07:31.883 --> 00:07:35.430
maybe I should send it back
to the link I came from.

130
00:07:35.430 --> 00:07:37.680
That's an improvement that
we could make potentially.

131
00:07:38.970 --> 00:07:42.080
But that's how I would
build this component.

132
00:07:42.080 --> 00:07:45.430
I guess one more thing we should look
at is the accessible name of this,

133
00:07:45.430 --> 00:07:48.530
just to make sure that
we've got that working.

134
00:07:48.530 --> 00:07:50.900
So I'm focused on this in the devtools.

135
00:07:50.900 --> 00:07:54.390
I'm going to go over
the Accessibility Inspector, and it says,

136
00:07:54.390 --> 00:07:56.246
skip to navigation.

137
00:07:56.246 --> 00:08:01.650
So the ARIA label is stomping over
the contents of that pseudo element.

138
00:08:01.650 --> 00:08:06.840
Because ARIA label on the parent will take
preference over whatever's inside of it.

139
00:08:06.840 --> 00:08:11.670
So something good to know about that and
I can see in this Accessibility

140
00:08:11.670 --> 00:08:16.490
inspector how the accessible name
calculation is like what's winning,

141
00:08:16.490 --> 00:08:19.370
if I have multiple things,
trying to like give it a name.

142
00:08:19.370 --> 00:08:22.310
I love this tool because it
will show me which one wins.

143
00:08:23.340 --> 00:08:25.040
That can get a little tricky sometimes.

144
00:08:25.040 --> 00:08:27.310
And so
I love that it shows what's crossed out,

145
00:08:27.310 --> 00:08:31.630
and what's actually going to be
exposed to assistive technology.

