WEBVTT

1
00:00:00.570 --> 00:00:04.596
&gt;&gt; Brian Holt: Now,
I want you to go to header.jsx.

2
00:00:04.596 --> 00:00:09.700
And now we're gonna say import

3
00:00:09.700 --> 00:00:16.573
connect at the top, from react-redux.

4
00:00:16.573 --> 00:00:22.528
And we're going to import set searchTerm.

5
00:00:22.528 --> 00:00:29.546
From
&gt;&gt; Brian Holt: ./actionCreators.

6
00:00:34.144 --> 00:00:38.451
&gt;&gt; Brian Holt: Okay,
&gt;&gt; Brian Holt: We come down here for

7
00:00:38.451 --> 00:00:41.401
defaultProps, get rid of
handleSearchTermChange.

8
00:00:44.274 --> 00:00:47.110
&gt;&gt; Brian Holt: Get rid of searchTerm.

9
00:00:50.199 --> 00:00:52.107
&gt;&gt; Brian Holt: Cuz these
are no longer optional

10
00:00:52.107 --> 00:00:56.325
types,
&gt;&gt; Brian Holt: Right?

11
00:00:59.926 --> 00:01:03.260
&gt;&gt; Brian Holt: You also are gonna
get rid of the maybe types here.

12
00:01:03.260 --> 00:01:05.480
So get rid of the question marks.

13
00:01:05.480 --> 00:01:08.887
Cuz now is just always gonna
be reading from Redux and

14
00:01:08.887 --> 00:01:12.881
it since only gonna
occasionally be using it.

15
00:01:12.881 --> 00:01:14.980
&gt;&gt; Brian Holt: Okay,
then down here at the bottom.

16
00:01:18.210 --> 00:01:22.500
You're still gonna have a defaultProps for
showSearch.

17
00:01:22.500 --> 00:01:27.390
You're gonna stay const mapStateToProps

18
00:01:27.390 --> 00:01:32.414
equals state which is
gonna return an object

19
00:01:32.414 --> 00:01:36.908
of searchTerm: state.searchTerm.

20
00:01:40.565 --> 00:01:44.490
&gt;&gt; Brian Holt: And
you're gonna have a const

21
00:01:44.490 --> 00:01:49.515
mapDispatchToProps which is gonna be

22
00:01:49.515 --> 00:01:54.701
equal to dispatch which is a function.

23
00:02:00.261 --> 00:02:01.455
&gt;&gt; Brian Holt: And, again,

24
00:02:01.455 --> 00:02:07.528
you're gonna be returning an object
with a HandleSearchTermChange and

25
00:02:07.528 --> 00:02:12.803
all that's going to do is take an event,
which is going to be a,

26
00:02:12.803 --> 00:02:17.899
actually don't think you don't
even have to type this one.

27
00:02:17.899 --> 00:02:24.734
And you're gonna dispatch a setSearchTerm,
oops, set,

28
00:02:29.403 --> 00:02:34.107
&gt;&gt; Brian Holt: From event.target.value.

29
00:02:38.343 --> 00:02:39.470
&gt;&gt; Brian Holt: Did I import this up there?

30
00:02:40.720 --> 00:02:42.410
No, I guess I didn't.

31
00:02:42.410 --> 00:02:44.372
Sorry, this should be setSearchTerm.

32
00:02:48.030 --> 00:02:48.662
&gt;&gt; Brian Holt: Yep.

33
00:02:53.089 --> 00:02:54.776
&gt;&gt; Brian Holt: And
then down here we're just gonna connect.

34
00:03:01.882 --> 00:03:04.000
&gt;&gt; Brian Holt: mapStateToProps.

35
00:03:04.000 --> 00:03:05.393
mapDispatchToProps.

36
00:03:09.895 --> 00:03:11.234
&gt;&gt; Brian Holt: And that is it.

37
00:03:17.201 --> 00:03:20.744
&gt;&gt; Brian Holt: Yup, cool.

38
00:03:20.744 --> 00:03:25.462
So, the nice thing is we had this
handle search term change that was

39
00:03:25.462 --> 00:03:28.000
coming in as a prop before, right?

40
00:03:28.000 --> 00:03:31.768
The nice thing is we don't have to
refactor that because that's already

41
00:03:31.768 --> 00:03:35.671
the contract that we have there, so
it's totally fine to leave that as is.

42
00:03:39.121 --> 00:03:40.914
&gt;&gt; Brian Holt: So
now handleSearchTermChange and

43
00:03:40.914 --> 00:03:43.430
searchTerm are both gonna be required.

44
00:03:43.430 --> 00:03:46.350
showSearchTerm is still a maybe
type because it might be coming,

45
00:03:46.350 --> 00:03:46.890
or it might not be.

46
00:03:49.540 --> 00:03:52.730
And then, yeah,
we're gonna have this input that may or

47
00:03:52.730 --> 00:03:57.880
may not be reading from Redux,
depending on which context it's called in.

48
00:03:57.880 --> 00:04:00.843
So let's save that and refresh.

49
00:04:03.635 --> 00:04:06.900
&gt;&gt; Brian Holt: Yep, still getting some
errors, which is not, it doesn't matter.

50
00:04:06.900 --> 00:04:12.420
So now if I say I'm gonna search for
black and I hit Enter.

51
00:04:12.420 --> 00:04:16.292
I'm going to go to the landing page
with that filled in from Redux, right.

52
00:04:19.941 --> 00:04:21.489
&gt;&gt; Brian Holt: Right, and
then I can modify it up here and

53
00:04:21.489 --> 00:04:23.610
it still give me reading from Redux.

54
00:04:23.610 --> 00:04:26.540
Another cool thing as
a nice product of this.

55
00:04:26.540 --> 00:04:31.180
If I click into Atlanta, and
then I click back, still gonna

56
00:04:31.180 --> 00:04:34.900
have the same search term because that's
being perpetuated in Redux, right.

57
00:04:34.900 --> 00:04:36.790
Nothing's modifying Redux when I go there.

58
00:04:40.160 --> 00:04:41.956
&gt;&gt; Brian Holt: Something else
that actually is a problem,

59
00:04:41.956 --> 00:04:45.250
if I go back to s video, right, well,
I mean it's still the reading Atlanta.

60
00:04:45.250 --> 00:04:49.814
That's fine, but if I say browse all I
actually, technically I haven't fixed that

61
00:04:49.814 --> 00:04:53.345
yet, but the only thing you would
have to do is if they clicked it,

62
00:04:53.345 --> 00:04:57.355
dispatch an action to Redux to clear
out the search term and that's fine.

63
00:04:57.355 --> 00:04:59.979
I'm not gonna do it here because
I literally just explained to you

64
00:04:59.979 --> 00:05:00.510
how to do it.

65
00:05:00.510 --> 00:05:04.900
I have all faith that you can go and
do it.

66
00:05:04.900 --> 00:05:05.819
Any questions?

67
00:05:09.180 --> 00:05:10.870
It only took us 2 hours,

68
00:05:10.870 --> 00:05:15.460
but we've at least completed
the first bit of migrating to Redux.

69
00:05:19.160 --> 00:05:20.260
It is pretty cool.

70
00:05:20.260 --> 00:05:25.160
I mean, the tradeoff here is that,
for example, if you look at Search.

71
00:05:25.160 --> 00:05:27.297
Search got a lot more simple, right.

72
00:05:27.297 --> 00:05:29.298
Search out used to have
to worry about state and

73
00:05:29.298 --> 00:05:32.480
passing props into the right header,
and all that kind of stuff.

74
00:05:32.480 --> 00:05:34.710
It no longer has to care about
that because search in and

75
00:05:34.710 --> 00:05:39.220
of itself, all it wants to do is read
search term and do searching, and

76
00:05:39.220 --> 00:05:41.740
it doesn't actually wanna read and
write to Redux, right.

77
00:05:41.740 --> 00:05:42.980
It can leave that problem to header.

78
00:05:42.980 --> 00:05:46.960
So by virtue of that, it doesn't have to

79
00:05:46.960 --> 00:05:50.950
care anymore because it only matters
where you're actually doing the writing.

80
00:05:50.950 --> 00:05:54.960
And the writing is actually happening in
header and it's not happening in search.

81
00:05:54.960 --> 00:05:56.417
So that is a nice city, right.

82
00:05:56.417 --> 00:06:00.617
It's gonna externalize this reading and
writing to your data store into like

83
00:06:00.617 --> 00:06:06.300
separate files and separate functions and
it's gonna simplify your react components.

84
00:06:06.300 --> 00:06:09.490
That's a net positive,
in my opinion, right?

85
00:06:09.490 --> 00:06:13.360
However, we greatly complicated
the process of reading and

86
00:06:13.360 --> 00:06:15.380
writing to our state, right?

87
00:06:15.380 --> 00:06:16.090
It's deliberate.

88
00:06:16.090 --> 00:06:21.900
It's very deliberate, which is a good
thing in general, right, but it's a pain.

89
00:06:21.900 --> 00:06:23.530
Yeah, it's just more code, right?

90
00:06:23.530 --> 00:06:26.054
It's more code and more things to
think about, which is always hard.

91
00:06:27.450 --> 00:06:28.935
&gt;&gt; Brian Holt: What we'll
talk about tomorrow

92
00:06:28.935 --> 00:06:30.940
is we'll talk about testing Redux.

93
00:06:30.940 --> 00:06:34.626
Cuz you can see, as you may imagine,
a lot of the stuff that we

94
00:06:34.626 --> 00:06:39.418
just did like the action creators, and
the reducers are extremely testable.

95
00:06:39.418 --> 00:06:43.620
So that's gonna be really positive for us.

96
00:06:43.620 --> 00:06:47.640
And I'm gonna show you how to actually
have Redux generate tests for

97
00:06:47.640 --> 00:06:49.440
itself, which is pretty cool.

98
00:06:51.560 --> 00:06:53.340
Any questions about Redux?

99
00:06:53.340 --> 00:06:55.930
I have shown you the happy path for Redux.

100
00:06:57.550 --> 00:06:58.900
This is most of what Redux is.

101
00:06:58.900 --> 00:07:01.540
It's just dispatching
actions into the reducers.

102
00:07:01.540 --> 00:07:08.190
And letting the reducers take care of
things, which then update the store,

103
00:07:08.190 --> 00:07:12.040
which then gets fed back into UI, right?

104
00:07:12.040 --> 00:07:13.400
That's most of Redux.

105
00:07:13.400 --> 00:07:15.084
Everything else is an advanced use case.

106
00:07:18.210 --> 00:07:19.204
&gt;&gt; Brian Holt: I would also say,

107
00:07:19.204 --> 00:07:23.540
you can actually write Redux
only ever doing stuff like this.

108
00:07:23.540 --> 00:07:26.190
I will show you tomorrow how
to do asynchronous stuff.

109
00:07:26.190 --> 00:07:28.230
You can actually externalize
the asynchronous stuff and

110
00:07:28.230 --> 00:07:32.944
never drive in Redux, but
you wouldn't do that, I guess [LAUGH].

