WEBVTT

1
00:00:00.260 --> 00:00:02.045
&gt;&gt; Brian: Let's go actually
start typing our project.

2
00:00:02.045 --> 00:00:05.723
The thing that you're gonna find with any
type system that you slowly introduce to

3
00:00:05.723 --> 00:00:09.660
your project is that up front it's a lot
more burden then it is helpful, right?

4
00:00:09.660 --> 00:00:13.300
If you're only type checking one file,
it basically accepting a bunch of,

5
00:00:13.300 --> 00:00:17.610
excuse me,
what we're gonna call any types and

6
00:00:17.610 --> 00:00:20.519
I'll explain to you
momentarily what that means.

7
00:00:21.580 --> 00:00:26.760
But as we slowly expand and
more files are being typed, you're gonna

8
00:00:26.760 --> 00:00:31.254
find that once everything is typed then
it's a huge productivity boom for you.

9
00:00:31.254 --> 00:00:34.620
It's just up front you're gonna
have to pay a pretty steep cost

10
00:00:34.620 --> 00:00:35.540
to be totally honest.

11
00:00:38.243 --> 00:00:41.865
&gt;&gt; Brian: So let's go to search jsx and
actually do some typing.

12
00:00:45.689 --> 00:00:53.970
&gt;&gt; Brian: So the way that you opt in a
file to be checked with flow is // @flow.

13
00:00:55.150 --> 00:00:59.061
As you can see already, my editor
is already complaining, he's like,

14
00:00:59.061 --> 00:01:02.860
you told me to check flow, now you're
gonna screw up a bunch of stuff.

15
00:01:04.040 --> 00:01:05.720
Actually it's only one thing,
which is nice.

16
00:01:06.830 --> 00:01:11.606
But you can see here, it says,
hey, this isn't working yet.

17
00:01:16.395 --> 00:01:22.155
&gt;&gt; Brian: And that's because Flow wants
to have type annotations for parameters.

18
00:01:24.558 --> 00:01:26.148
&gt;&gt; Brian: Which is what we're gonna do.

19
00:01:26.148 --> 00:01:28.000
And then the other thing is that.

20
00:01:29.300 --> 00:01:32.470
So we're gonna be doing more
like invalid JavaScript, right?

21
00:01:32.470 --> 00:01:35.955
Adding type annotations to your code
is not valid JavaScript because there's

22
00:01:35.955 --> 00:01:38.390
no type annotations in JavaScript.

23
00:01:38.390 --> 00:01:42.190
So you would need a Babel plugin
to transform your code from

24
00:01:42.190 --> 00:01:46.090
code that has flow annotations
to normal JavaScript.

25
00:01:46.090 --> 00:01:50.100
Luckily for us, we’re including
the React preset for Babel and

26
00:01:50.100 --> 00:01:52.760
that includes the flow
annotation removing code.

27
00:01:52.760 --> 00:01:56.270
So if you’re not including that,
you have to include that now.

28
00:01:56.270 --> 00:02:01.540
But since we included that preset, in
fact I’ll show you real quick, babel RC.

29
00:02:01.540 --> 00:02:05.440
This right here, this line, makes it so

30
00:02:05.440 --> 00:02:12.130
that our code is already able to
remove those flow type annotations.

31
00:02:12.130 --> 00:02:16.590
Okay, sorry, going back to search.jsx.

32
00:02:16.590 --> 00:02:20.846
So now we want to type this event, right?

33
00:02:20.846 --> 00:02:26.173
Because otherwise if you go here
to yarn flow, it's gonna say, hey,

34
00:02:26.173 --> 00:02:31.160
you need an annotation here,
I don't know what this is, right?

35
00:02:33.150 --> 00:02:37.280
The other thing to note is notice
this ran really fast, right?

36
00:02:37.280 --> 00:02:39.530
As opposed to last time,
it took a bit to start up.

37
00:02:39.530 --> 00:02:42.300
Before it was starting up
that whole process, but

38
00:02:42.300 --> 00:02:44.710
now it's just running
constantly in the background.

39
00:02:44.710 --> 00:02:45.830
So now it's really fast.

40
00:02:47.160 --> 00:02:50.310
Okay, so,
we need to add a type annotation to this.

41
00:02:51.830 --> 00:02:52.810
What is this?

42
00:02:54.020 --> 00:02:57.230
You're gonna find yourself
asking that question a lot,

43
00:02:57.230 --> 00:02:58.540
when you're adding types to something.

44
00:02:59.650 --> 00:03:04.070
But, what this is, it's a really positive
thing, not just for your future self and

45
00:03:04.070 --> 00:03:06.710
like getting the flow type and
all the stuff like that.

46
00:03:06.710 --> 00:03:10.930
But it's useful for you to think through
what your code actually does, right?

47
00:03:12.670 --> 00:03:16.700
And you'll find here that you'll start
refactoring things to be more concise

48
00:03:16.700 --> 00:03:19.340
because you're more aware of
whats going into functions and

49
00:03:19.340 --> 00:03:20.150
whats coming out of them.

50
00:03:20.150 --> 00:03:24.784
That becomes very important
when you're doing types.

51
00:03:24.784 --> 00:03:28.664
&gt;&gt; Brian: Okay, so
this is a KeyboardEvent.

52
00:03:33.441 --> 00:03:38.172
&gt;&gt; Brian: What's nice about specifically
flow is it has all this like browser stuff

53
00:03:38.172 --> 00:03:39.708
already typed for you.

54
00:03:39.708 --> 00:03:44.000
You don't have to do anything,
like KeyboardEvent already exists.

55
00:03:44.000 --> 00:03:48.326
And if you need to or if you want to
look at them, go to flowtype.org.

56
00:03:48.326 --> 00:03:50.922
Something, another place that
if you're gonna do flow typing,

57
00:03:50.922 --> 00:03:53.200
you're gonna spend a lot of
time in the documentations.

58
00:03:54.980 --> 00:03:59.831
And there's like the type system, there's
library definitions, configurations,

59
00:03:59.831 --> 00:04:01.150
all that kind of stuff.

60
00:04:04.063 --> 00:04:05.942
&gt;&gt; Brian: For those of you with, and

61
00:04:05.942 --> 00:04:11.810
I would also recommend that you put
this into your editor, like I have.

62
00:04:11.810 --> 00:04:17.800
So again, I'm gonna show you for Sublime,
you're gonna say, Install Package.

63
00:04:17.800 --> 00:04:20.931
I'm gonna share a list
cuz I have it installed.

64
00:04:20.931 --> 00:04:26.289
And then if you go down here, remember
that I installed the SublimeLinter,.

65
00:04:26.289 --> 00:04:30.748
Right, for the ESLint, there's
another one called SublimeLinter-flow.

66
00:04:30.748 --> 00:04:33.860
And I'm gonna get all those flow
errors directly in to my editor.

67
00:04:35.290 --> 00:04:36.520
It already exists for

68
00:04:36.520 --> 00:04:40.990
Adam as well, I can't remember the name
of the package off the top of my head.

69
00:04:40.990 --> 00:04:45.900
But I know this one called
nuclide that Facebook puts out.

70
00:04:46.915 --> 00:04:49.061
I'd have very little
experience with nuclide but

71
00:04:49.061 --> 00:04:51.783
nuclide was specifically built
by Facebook with flow in mind.

72
00:04:54.675 --> 00:05:00.500
&gt;&gt; Brian: Okay, so
this is a KeyboardEvent.

73
00:05:00.500 --> 00:05:05.860
That's actually not even 100% true because
this is a React Synthetic KeyboardEvent.

74
00:05:05.860 --> 00:05:10.567
Again, likely since this is built by
Facebook, they already provided for

75
00:05:10.567 --> 00:05:14.089
this, so
this is actually a SyntheticKeyboardEvent.

76
00:05:18.090 --> 00:05:19.329
&gt;&gt; Brian: Did I spell that wrong?

77
00:05:19.329 --> 00:05:24.598
SyntheticKeyboardEvent.

78
00:05:33.997 --> 00:05:36.512
&gt;&gt; Brian: Now I thought that was right.

79
00:05:36.512 --> 00:05:39.939
Well, let's keep going.

80
00:05:39.939 --> 00:05:41.656
Let's stick with KeyboardEvent for

81
00:05:41.656 --> 00:05:46.472
just a second but,
&gt;&gt; Brian: Now what this is

82
00:05:46.472 --> 00:05:49.732
gonna complain about is it's
still saying right here

83
00:05:49.732 --> 00:05:53.370
that event.target.value is
not guaranteed to be there.

84
00:05:54.650 --> 00:05:57.630
That's because when you have
a KeyboardEvent, it is possible for

85
00:05:57.630 --> 00:06:01.480
the browser to emit
the KeyboardEvent with no target.

86
00:06:01.480 --> 00:06:04.024
Don't ask me how that happens but
it is possible.

87
00:06:04.024 --> 00:06:05.840
And so Flow is gonna make you say,

88
00:06:05.840 --> 00:06:09.250
I want you to acknowledge that
this is going to be there.

89
00:06:09.250 --> 00:06:14.664
So what you can say is and,
&gt;&gt; Brian: target

90
00:06:14.664 --> 00:06:20.471
is going to be an HTMLInputElement.

91
00:06:24.233 --> 00:06:26.601
&gt;&gt; Brian: And now, that's been typed.

92
00:06:31.010 --> 00:06:34.370
&gt;&gt; Brian: SyntheticKeyboardEvent.

93
00:06:34.370 --> 00:06:36.521
Why was that working for me before?

94
00:06:36.521 --> 00:06:44.940
All right, react flow synthetic event.

95
00:06:53.235 --> 00:06:58.041
&gt;&gt; Brian: SyntheticKeyboardEvent.

96
00:07:07.552 --> 00:07:08.625
&gt;&gt; Brian: That's super weird to me.

97
00:07:08.625 --> 00:07:10.430
I have no idea why it doesn't like that.

98
00:07:13.355 --> 00:07:17.971
Okay, another problem that I
have with sometimes with Flow,

99
00:07:17.971 --> 00:07:21.093
sometimes it's just slow on the uptake.

100
00:07:23.792 --> 00:07:26.597
&gt;&gt; Brian: Cuz my yarn flow
is not complaining, so

101
00:07:26.597 --> 00:07:29.329
I'm sure it'll eventually go away.

102
00:07:29.329 --> 00:07:32.047
&gt;&gt; [LAUGH]
&gt;&gt; Brian: Yeah,

103
00:07:32.047 --> 00:07:35.734
it's particularly with Flow, sometimes
it takes awhile for it to kind of say,

104
00:07:35.734 --> 00:07:37.560
you know what, this is actually okay.

105
00:07:39.780 --> 00:07:45.520
Like take your input from
the command line is gospel.

106
00:07:47.630 --> 00:07:50.925
Okay, so
we're gonna leave that alone for now.

107
00:07:56.676 --> 00:07:57.808
&gt;&gt; Brian: That's what it is, yeah.

108
00:08:05.284 --> 00:08:09.680
&gt;&gt; Brian: So we have to go make
ESLint play okay with Flow as well.

109
00:08:12.650 --> 00:08:18.298
&gt;&gt; Speaker 2: Is running the yarn flow
output a list of files that it processes

110
00:08:18.298 --> 00:08:23.059
flow files,
&gt;&gt; Speaker 2: For

111
00:08:23.059 --> 00:08:23.982
these account or something.

112
00:08:23.982 --> 00:08:28.637
&gt;&gt; Brian: There is something you can do.

113
00:08:33.928 --> 00:08:36.239
&gt;&gt; Brian: I will just look at the help,
so that's what it is, that's what it is.

114
00:08:39.775 --> 00:08:42.580
&gt;&gt; Brian: So
I'm gonna come in here to my project.

115
00:08:48.660 --> 00:08:52.335
&gt;&gt; Brian: And
we're gonna look at the eslint.json.

116
00:08:52.335 --> 00:08:54.530
This is what you need which
I don't have in my notes.

117
00:09:00.552 --> 00:09:01.980
&gt;&gt; Brian: Yep, that's the one.

118
00:09:01.980 --> 00:09:08.300
Okay, so come to your eslint.json.

119
00:09:08.300 --> 00:09:11.190
We need to let eslint to know, it's like,

120
00:09:11.190 --> 00:09:15.310
hey, we're gonna be doing a bunch of
stuff with flow, and that's okay.

121
00:09:16.410 --> 00:09:21.565
So right there you're gonna put
plugin:flowtype/recommended.

122
00:09:23.987 --> 00:09:26.348
&gt;&gt; Brian: Do I need to plug in flow and
down there as well?

123
00:09:26.348 --> 00:09:29.170
I do, okay.

124
00:09:29.170 --> 00:09:32.769
And then above prettier, you're gonna
also have to have a flowtype plugin.

125
00:09:37.220 --> 00:09:42.024
&gt;&gt; Brian: So this is just saying I
have this plugin flowtype for eslint.

126
00:09:42.024 --> 00:09:45.215
And I want you to bring in all
their recommended rules, right?

127
00:09:45.215 --> 00:09:48.930
They have more rules as well but
I found they're a little too strict.

128
00:09:48.930 --> 00:09:51.320
So I just bring in what they
call their recommended rule set.

129
00:09:53.960 --> 00:09:56.570
Okay, now, so yeah again,

130
00:09:56.570 --> 00:10:01.162
we added two lines, line number 9 right
there and line number 3 right there.

131
00:10:03.260 --> 00:10:06.179
And let's go take a look at search again.

132
00:10:12.642 --> 00:10:16.385
&gt;&gt; Brian: And now, now it's going to
recognize that the SyntheticKeyboardEvent

133
00:10:16.385 --> 00:10:18.603
is actually a flow thing and that's okay.

134
00:10:21.834 --> 00:10:26.218
&gt;&gt; Brian: Now the most beautiful part
about flow to me is it's pretty good

135
00:10:26.218 --> 00:10:29.650
at already knowing what everything is.

136
00:10:29.650 --> 00:10:34.010
So the only reason that we had to annotate
event right here was that there was

137
00:10:34.010 --> 00:10:37.100
no way that flowtype could figure out
what that is eventually going to be.

138
00:10:37.100 --> 00:10:39.090
How it was eventually going to be called,
right?

139
00:10:40.270 --> 00:10:46.330
So we had to go in and say, hey, this is
what this is, but everything else, right?

140
00:10:46.330 --> 00:10:49.910
It knows that like Search
now is a React component,

141
00:10:49.910 --> 00:10:52.330
I never have to tell it that because
it's already figured that out.

142
00:10:54.250 --> 00:10:57.226
So it does a ton of what's
called type inference for you,

143
00:10:57.226 --> 00:10:58.717
just out of the box for free.

144
00:11:02.099 --> 00:11:03.040
&gt;&gt; Brian: Which is pretty great.

145
00:11:03.040 --> 00:11:06.565
And it's even gonna go as far to read
actually like preload into the JSON

146
00:11:06.565 --> 00:11:10.702
file and see what's coming out of there
and everything like that which is awesome.

147
00:11:13.879 --> 00:11:19.780
&gt;&gt; Brian: So, let's go and do some
more typing because that's always fun.

148
00:11:19.780 --> 00:11:21.055
Let's go to ShowCard.

149
00:11:26.216 --> 00:11:27.576
&gt;&gt; Brian: Gonna opt this
one into flow typing.

150
00:11:31.953 --> 00:11:35.324
&gt;&gt; Brian: And as soon as you do that,
then it's gonna say a bunch of stuff.

151
00:11:42.725 --> 00:11:44.517
&gt;&gt; Brian: So
the first thing it's gonna say is,

152
00:11:44.517 --> 00:11:46.880
styled-components required
module not found.

153
00:11:48.720 --> 00:11:49.843
That's a new one.

154
00:12:02.425 --> 00:12:04.900
&gt;&gt; Brian: Well,
let's keep going with this anyway.

155
00:12:04.900 --> 00:12:08.020
The thing about flowtype is you don't
need prop-types anymore, right?

156
00:12:08.020 --> 00:12:11.780
Because the type checking
that Flow is gonna do for

157
00:12:11.780 --> 00:12:15.130
you is more robust than anything
prop-types would ever do for you.

158
00:12:15.130 --> 00:12:19.926
So we're actually just gonna
drop the prop-types here.

159
00:12:19.926 --> 00:12:24.600
And then down here where
it says ShowCard.propTypes,

160
00:12:24.600 --> 00:12:29.630
we're actually just gonna go up and type
these props right here where they are.

161
00:12:30.830 --> 00:12:35.375
So I'm just gonna copy this and then here,

162
00:12:35.375 --> 00:12:40.680
I'm going to make these
the prop-types up here,

163
00:12:40.680 --> 00:12:46.261
but you gotta get rid of all
of the isRequired stuff.

164
00:12:46.261 --> 00:12:48.114
So I'm gonna just do this.

165
00:13:03.623 --> 00:13:06.650
&gt;&gt; Brian: With yarn
flow what is with that?

166
00:13:08.990 --> 00:13:11.147
Do I have more is required down there?

167
00:13:11.147 --> 00:13:13.992
Yeah, and drop the prop-types down there,
you don't need those anymore.

168
00:13:19.182 --> 00:13:20.757
&gt;&gt; Brian: yarn flow.

169
00:13:24.294 --> 00:13:25.822
&gt;&gt; Brian: Required module not found.

170
00:13:34.131 --> 00:13:39.080
&gt;&gt; Brian: Yeah, okay,
&gt;&gt; Brian: That is the issue.

171
00:13:39.080 --> 00:13:43.770
So the problem that we've done here is
that we ignored styled-components but

172
00:13:43.770 --> 00:13:46.790
we still have to acknowledge
that it's there.

173
00:13:46.790 --> 00:13:51.592
So this is gonna be style-components,
I think.

174
00:13:54.098 --> 00:13:55.746
&gt;&gt; Brian: Yeah, okay, no.

175
00:14:10.212 --> 00:14:13.711
&gt;&gt; Brian: So,
going back to my completed code here,

176
00:14:13.711 --> 00:14:17.029
flow config libs styled-components.

177
00:14:17.029 --> 00:14:18.928
Did I do that?

178
00:14:18.928 --> 00:14:20.129
I think that's what I did.

179
00:14:25.464 --> 00:14:26.750
&gt;&gt; Brian: Styled-components, there we go.

180
00:14:27.980 --> 00:14:32.360
So what I did was come into the flow
config where we're trying to ignore this

181
00:14:32.360 --> 00:14:35.820
directory because it has a bunch
of flow errors inside of it.

182
00:14:35.820 --> 00:14:40.291
But we still have to acknowledge that it
exists otherwise Flow want acknowledge it

183
00:14:40.291 --> 00:14:40.818
exists.

184
00:14:40.818 --> 00:14:44.461
So libs is just gonna say this is
something that I have coming in and

185
00:14:44.461 --> 00:14:47.387
just don't type check this,
that's what it does.

186
00:14:50.940 --> 00:14:52.290
&gt;&gt; Brian: So come back to ShowCard and

187
00:14:52.290 --> 00:14:59.480
now hopefully,
&gt;&gt; Brian: This resolved itself, okay.

188
00:15:03.818 --> 00:15:05.820
&gt;&gt; Brian: Why don't you love me?

189
00:15:05.820 --> 00:15:06.937
What is your problem with me?

190
00:15:14.500 --> 00:15:17.559
&gt;&gt; Brian: Well, it is what it is right now

191
00:15:24.411 --> 00:15:26.219
&gt;&gt; Brian: FlowFixMe I think is what it is.

192
00:15:29.197 --> 00:15:31.308
&gt;&gt; Brian: That's cool,
we will come back to this later.

193
00:15:31.308 --> 00:15:34.309
But for now if you ever need to ignore
a line which I do not suggest you

194
00:15:34.309 --> 00:15:37.579
do unless you're giving a live workshop
in front of hundreds of people,

195
00:15:37.579 --> 00:15:39.690
you can use FlowFixMe to say ignore me for
now.

